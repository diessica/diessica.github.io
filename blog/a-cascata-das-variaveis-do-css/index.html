<!doctype html><html class="scroll-smooth md:border-[10px] md:border-solid min-h-screen md:border-purple" lang=en><head><meta charset=utf-8><link href="/css/style.css?h=012c5f95ea1463230821" rel=stylesheet><meta content="width=device-width,initial-scale=1" name=viewport><title>A Cascata das Variáveis do CSS | Diéssica Gurskas</title><body class="text-gray-700 font-body antialiased"><div class="bg-blog px-3 md:px-10 min-h-[calc(100vh-16px)] lg:min-h-[calc(100vh-20px)]"><div class="py-12 mb-4 text-center space-x-8 text-md md:text-lg relative z-20"><a class="no-underline font-extrabold hover:border-green hover:border-b-2" href=/>diessi.ca</a><a class="no-underline hover:border-green hover:border-b-2 border-green border-b-2" href=/blog/>Blog</a><a class="no-underline hover:border-green hover:border-b-2" href=/misc/>Misc</a></div><article class="container mx-auto w-full xl:w-1/2 pb-8"><header class="xl:-mx-56 text-center mb-8 md:mb-12"><div class="uppercase tracking-widest opacity-60 mb-4 text-xs">May 30, 2016</div><h1 class="font-extrabold font-display text-3xl md:text-5xl xl:text-6xl text-slate-900">A Cascata das Variáveis do CSS</h1></header><div class="prose prose-sm md:prose 2xl:prose-lg prose-hr:text-red prose-hr:w-48 prose-hr:h-0.5 prose-hr:mx-auto prose-hr:my-4 prose-hr:bg-black prose-hr:opacity-20 prose-hr:border-0 prose-hr:rounded prose-hr:md:my-10 prose-pre:rounded-none prose-blockquote:border-0 prose-blockquote:text-center prose-blockquote:text-xl prose-blockquote:text-current tracking-tight mx-auto prose-headings:text-slate-800 prose-headings:w-max prose-headings:font-display prose-headings:font-extrabold"><p style=text-align:center><a href="http://caniuse.com/#feat=css-variables">Suporte</a> | <a href=https://www.w3.org/TR/css-variables/>Especificação</a><p>Muito embora todos os seres humanos do Planeta Terra tenham odiado sua sintaxe, as variáveis finalmente chegaram ao CSS – e elas são mais poderosas do que você imagina!<h2 id=motivacao>Motivação</h2><p>O desenvolvimento de grandes aplicações web implica inevitavelmente em grandes folhas de estilo, que devem ser organizadas de forma que facilite a manutenção. Muitos valores definidos para propriedades são repetidos, quando poderiam ser reutilizados e padronizados, de forma compartilhada, pela folha de estilo.<p>Nesse contexto, surgem as variáveis no CSS, também chamadas de <em>Custom Properties</em> – pois, tecnicamente, é isso que elas são.<h2 id=definicao>Definição</h2><p>As <em>Custom Properties</em> são propriedades CSS customizadas (ou seja, você configura o seu valor) iniciadas com <code>--</code>, de nome <em>case-sensitive</em>, e que são utilizadas no documento através da função <code>var()</code>. Por serem propriedades, é importante compreender que seu comportamento é idêntico ao de uma propriedade qualquer do CSS (guarde essa informação!).<h3 id=exemplo>Exemplo</h3><pre class=language-css data-lang=css style=color:#f8f8f2;background-color:#282a36><code class=language-css data-lang=css><span>:root {
</span><span>  </span><span style=color:#66d9ef;font-style:italic>--colorPrimary</span><span>: </span><span style=color:#6be5fd>purple</span><span>;
</span><span>}
</span><span>
</span><span style=color:#ff79c6>a </span><span>{
</span><span>  </span><span style=color:#66d9ef;font-style:italic>color</span><span>: </span><span style=color:#8be9fd>var</span><span>(</span><span style=color:#66d9ef;font-style:italic>--colorPrimary</span><span>);
</span><span>}
</span></code></pre><p>(Eu não conheço ninguém que gosta da ideia esplêndida do <code>--</code>. Mas elas não vão deixar de iniciar com <code>--</code> se você reclamar. Inclusive, <a href=http://www.xanthir.com/blog/b4KT0>isso já foi discutido o suficiente</a>.)<h2 id=a-funcao-var>A função <code>var()</code></h2><p>Quem viabiliza o uso de <em>Custom Properties</em>? Ela:<pre class=language-css data-lang=css style=color:#f8f8f2;background-color:#282a36><code class=language-css data-lang=css><span style=color:#ff79c6>var</span><span>( <</span><span style=color:#ff79c6>custom-property-name</span><span>> [, <</span><span style=color:#50fa7b>declaration-value</span><span>> ]? )
</span></code></pre><p>O primeiro parâmetro é o nome da propriedade, e o segundo, opcional, é o valor a ser usado como <em>fallback</em> caso o primeiro argumento seja inválido (por exemplo: uma variável com <code>20px</code> sendo usada como valor de um <code>background</code>, ou variável inexistente).<h2 id=escopo>Escopo</h2><p>Cascata, especificidade, herança… Esses conceitos são muito importantes para entender o poder das variáveis do CSS – e do CSS no geral, eu diria.<p>Aqui, uma das informações mais importantes deste artigo: As <em>Custom Properties</em> seguem <strong>regras de cascata</strong> tal como qualquer outra propriedade do CSS.<p>Por isso, quando quisermos que a variável esteja disponível “globalmente” (para todos os seletores), a declaramos no seletor <code>:root</code>, que é o próprio documento HTML. Isso acontece pois <strong>o efeito cascata do CSS permite que todos seus descendentes herdem a propriedade.</strong> Legal, né?<p>A propriedade customizada, tal como qualquer outra propriedade, pode ser sobreescrita através de seletores. Seu valor será definido de acordo com a <strong>especifidade</strong> deles.<p class=note><p>A implementação de <em>Custom Properties</em> do CSSNext não segue regras de cascata. Apenas variáveis declaradas no <code>:root</code> são válidas. :-(<h3 id=exemplo-1>Exemplo</h3><pre class=language-css data-lang=css style=color:#f8f8f2;background-color:#282a36><code class=language-css data-lang=css><span>:root {
</span><span>  </span><span style=color:#66d9ef;font-style:italic>--bgColor</span><span>: </span><span style=color:#6be5fd>indianred</span><span>;
</span><span>}
</span><span>
</span><span style=color:#ff79c6>div </span><span>{
</span><span>  </span><span style=color:#66d9ef;font-style:italic>--bgColor</span><span>: </span><span style=color:#6be5fd>darkseagreen</span><span>;
</span><span>}
</span><span>
</span><span style=color:#50fa7b>#wow </span><span>{
</span><span>  </span><span style=color:#66d9ef;font-style:italic>--bgColor</span><span>: </span><span style=color:#6be5fd>darkcyan</span><span>;
</span><span>}
</span><span>
</span><span style=color:#ff79c6>* </span><span>{
</span><span>  </span><span style=color:#66d9ef;font-style:italic>background-color</span><span>: </span><span style=color:#8be9fd>var</span><span>(</span><span style=color:#66d9ef;font-style:italic>--bgColor</span><span>);
</span><span>}
</span></code></pre><p>Nesse caso:<ul><li>Todos os elementos são vermelhos.<li>Exceto elementos <code>div</code> e seus filhos, que seriam verdes.<li>Exceto o elemento com id <code>wow</code> e seus filhos, que seriam ciano.</ul><p>As últimas versões do Firefox e Chrome já implementaram as variáveis nativas do CSS. Se estiver utilizando algum desses navegadores, o exemplo abaixo ilustrará o funcionamento do CSS acima.<p><a class=jsbin-embed href=http://jsbin.com/meboki/edit?html,output>JS Bin on jsbin.com</a><script src=http://static.jsbin.com/js/embed.min.js?3.35.12></script><h2 id=manipulando-variaveis-css-com-javascript>Manipulando variáveis CSS com JavaScript</h2><p>Outra informação valiosa sobre as variáveis do CSS é a possibilidade de acessá-las e alterá-las via JavaScript, usando a interface <a href=https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration><code>CSSStyleDeclaration</code></a> para interagir com propriedades.<h3 id=exemplo-2>Exemplo</h3><p>Considerando:<pre class=language-css data-lang=css style=color:#f8f8f2;background-color:#282a36><code class=language-css data-lang=css><span>:root {
</span><span>  </span><span style=color:#66d9ef;font-style:italic>--my-color</span><span>: </span><span style=color:#6be5fd>darkcyan</span><span>;
</span><span>  </span><span style=color:#66d9ef;font-style:italic>background-color</span><span>: </span><span style=color:#8be9fd>var</span><span>(</span><span style=color:#66d9ef;font-style:italic>--my-color</span><span>);
</span><span>}
</span></code></pre><p>Você pode obter o valor da propriedade <code>--my-color</code>, através do <code>window.getComputedStyle()</code> e <code>getPropertyValue()</code>.<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>myColor </span><span style=color:#ff79c6>= </span><span style=color:#50fa7b>getComputedStyle</span><span>(document</span><span style=color:#ff79c6>.</span><span>body)</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>getPropertyValue</span><span>(</span><span style=color:#f1fa8c>"--my-color"</span><span>);
</span><span style=color:#66d9ef;font-style:italic>console</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd>log</span><span>(</span><span style=color:#fff>myColor</span><span>); </span><span style=color:#6272a4>// => darkcyan
</span></code></pre><p>Você pode alterar o valor da variável, através do <code>setProperty()</code> do <a href=https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style>objeto <code>style</code></a>:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span>document</span><span style=color:#ff79c6>.</span><span>body</span><span style=color:#ff79c6>.</span><span>style</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>setProperty</span><span>(</span><span style=color:#f1fa8c>"--my-color"</span><span>, </span><span style=color:#f1fa8c>"tomato"</span><span>);
</span></code></pre><p class=note><p>Conheça o <code>CSSStyleDeclaration</code> abrindo o DevTools e digitando <code>getComputedStyle(document.body)</code> no console.<h2 id=curiosidades>Curiosidades</h2><ul><li>Você não pode armazenar nomes de propriedades do CSS como <em>Custom Properties</em>.</ul><pre class=language-css data-lang=css style=color:#f8f8f2;background-color:#282a36><code class=language-css data-lang=css><span style=color:#ff79c6>div </span><span>{
</span><span>  </span><span style=color:#66d9ef;font-style:italic>--myProperty</span><span>: overflow;
</span><span>  var(</span><span style=color:#66d9ef;font-style:italic>--myProperty</span><span>): </span><span style=color:#6be5fd>hidden</span><span>; </span><span style=color:#6272a4>/* Erro de sintaxe */
</span><span>}
</span></code></pre><p>…Em compensação, você pode armazenar qualquer outra coisa (e usá-las com JavaScript!):<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#ff79c6>--</span><span>foo: </span><span style=color:#ff79c6>if </span><span>(</span><span style=color:#fff>x </span><span style=color:#ff79c6>> </span><span style=color:#bd93f9>5</span><span>) </span><span style=color:#bd93f9>this</span><span style=color:#ff79c6>.</span><span>width </span><span style=color:#ff79c6>= </span><span style=color:#bd93f9>10</span><span>;
</span></code></pre><ul><li>Você não pode formar valores com variáveis.</ul><pre class=language-css data-lang=css style=color:#f8f8f2;background-color:#282a36><code class=language-css data-lang=css><span style=color:#ff79c6>div </span><span>{
</span><span>  </span><span style=color:#66d9ef;font-style:italic>--myContainerWidth</span><span>: </span><span style=color:#bd93f9>300</span><span>;
</span><span>  </span><span style=color:#66d9ef;font-style:italic>width</span><span>: </span><span style=color:#8be9fd>var</span><span>(</span><span style=color:#66d9ef;font-style:italic>--myContainerWidth</span><span>) px; </span><span style=color:#6272a4>/* Valor inválido */
</span><span>  </span><span style=color:#6272a4>/* => 300 px, em vez de 300px */
</span><span>}
</span></code></pre><p>…Ao menos que você use <code>calc()</code>:<pre class=language-css data-lang=css style=color:#f8f8f2;background-color:#282a36><code class=language-css data-lang=css><span style=color:#ff79c6>div </span><span>{
</span><span>  </span><span style=color:#66d9ef;font-style:italic>--myContainerWidth</span><span>: </span><span style=color:#bd93f9>300</span><span>;
</span><span>  </span><span style=color:#66d9ef;font-style:italic>width</span><span>: </span><span style=color:#8be9fd>calc</span><span>(</span><span style=color:#8be9fd>var</span><span>(</span><span style=color:#66d9ef;font-style:italic>--myContainerWidth</span><span>) </span><span style=color:#ff79c6>* </span><span style=color:#bd93f9>1</span><span style=color:#ff79c6>px</span><span>); </span><span style=color:#6272a4>/* => width: 300px; */
</span><span>}
</span></code></pre><h2 id=consideracoes-finais>Considerações Finais</h2><p>As <em>Custom Properties</em> abriram novas possibilidades para o uso de variáveis em folhas de estilo. Depois de diversas especificações e sintaxes (<a href=https://www.w3.org/TR/2013/WD-css-variables-1-20130620/#var->nem sempre foi <code>--</code></a>, acredite!), elas estão finalmente em fase de implementação nos navegadores.<p>Tem interesse em se aprofundar em outras novas funcionalidades do CSS? Acompanhe a série <a href=/blog/o-css-do-futuro/>O CSS do Futuro</a>!</div></article></div></body><script src=/footnotes.js></script>