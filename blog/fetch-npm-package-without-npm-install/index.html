<!doctype html><html class="scroll-smooth md:border-[10px] md:border-solid min-h-screen md:border-purple" lang=en><head><meta charset=utf-8><link href="/css/style.css?h=012c5f95ea1463230821" rel=stylesheet><meta content="width=device-width,initial-scale=1" name=viewport><title>Fetch a npm package on GitHub without npm install | Diéssica Gurskas</title><body class="text-gray-700 font-body antialiased"><div class="bg-blog px-3 md:px-10 min-h-[calc(100vh-16px)] lg:min-h-[calc(100vh-20px)]"><div class="py-12 mb-4 text-center space-x-8 text-md md:text-lg relative z-20"><a class="no-underline font-extrabold hover:border-green hover:border-b-2" href=/>diessi.ca</a><a class="no-underline hover:border-green hover:border-b-2 border-green border-b-2" href=/blog/>Blog</a><a class="no-underline hover:border-green hover:border-b-2" href=/misc/>Misc</a></div><article class="container mx-auto w-full xl:w-1/2 pb-8"><header class="xl:-mx-56 text-center mb-8 md:mb-12"><div class="uppercase tracking-widest opacity-60 mb-4 text-xs">August 25, 2024</div><h1 class="font-extrabold font-display text-3xl md:text-5xl xl:text-6xl text-slate-900">Fetch a npm package on GitHub without npm install</h1></header><div class="prose prose-sm md:prose 2xl:prose-lg prose-hr:text-red prose-hr:w-48 prose-hr:h-0.5 prose-hr:mx-auto prose-hr:my-4 prose-hr:bg-black prose-hr:opacity-20 prose-hr:border-0 prose-hr:rounded prose-hr:md:my-10 prose-pre:rounded-none prose-blockquote:border-0 prose-blockquote:text-center prose-blockquote:text-xl prose-blockquote:text-current tracking-tight mx-auto prose-headings:text-slate-800 prose-headings:w-max prose-headings:font-display prose-headings:font-extrabold"><p>The other day, a npm package was released broken to a private GitHub registry and it wouldn’t install:<pre style=color:#f8f8f2;background-color:#282a36><code><span>> npm install @company/my-package
</span><span>This error happened while installing the dependencies of @company/my-package@0.0.34
</span><span>
</span><span>another-package is not in the npm registry, or you have no permission to fetch it.
</span></code></pre><p>The error message is clear: the released package <code>@company/my-package</code> I’m trying to install depends on a package <code>another-package</code> expected to exist in the npm registry somewhere. But <code>another-package</code> is not there. I already knew those packages came from a monorepo, so likely <code>another-package</code> was only an internal dependency in the monorepo, left unreleased. I wanted to inspect the package contents before releasing any fix to be sure, but couldn’t rely on <code>npm install</code> for that. There used to be an option to download npm packages via GitHub UI, but that’s no longer the case.<h2 id=finding-the-package-tarball>Finding the package tarball</h2><p>One can read the package’s metadata to find a download URL for the package’s latest version. Here’s how:<ol><li><p>(For private GitHub registries) Grab a <a href=https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic>classic GitHub token</a> with <code>packages:read</code> permissions (hereafter <code>{GITHUB_TOKEN}</code>).</p><li><p>The URL of a npm package published to GitHub is <code>https://npm.pkg.github.com/{PACKAGE_NAME}</code>. Use that to fetch the package metadata, which contains the package tarball URL.</p></ol><pre class=language-sh data-lang=sh style=color:#f8f8f2;background-color:#282a36><code class=language-sh data-lang=sh><span style=color:#ff79c6>></span><span> curl </span><span style=color:#50fa7b>-L</span><span style=color:#ffb86c;font-style:italic> -H </span><span style=color:#f1fa8c>"Authorization: Bearer {GITHUB_TOKEN}" "https://npm.pkg.github.com/@company%2Fmy-package" </span><span style=color:#ff79c6>|  </span><span style=color:#50fa7b>grep</span><span style=color:#ffb86c;font-style:italic> -o </span><span style=color:#f1fa8c>'"tarball":"[^"]*"'
</span><span style=color:#f1fa8c>"tarball"</span><span style=color:#50fa7b>:</span><span style=color:#f1fa8c>"https://npm.pkg.github.com/download/@company/my-package/0.0.34/3d0304f38791214b09ec92a2262ca1697f"
</span></code></pre><ol start=3><li>Download the package using the tarball URL.</ol><pre class=language-sh data-lang=sh style=color:#f8f8f2;background-color:#282a36><code class=language-sh data-lang=sh><span style=color:#ff79c6>></span><span> curl </span><span style=color:#50fa7b>-L</span><span style=color:#ffb86c;font-style:italic> -H </span><span style=color:#f1fa8c>"Authorization: Bearer {GITHUB_TOKEN}" "https://npm.pkg.github.com/download/@company/my-package/0.0.34/3d0304f38791214b09ec92a2262ca1697f" </span><span style=color:#ff79c6>| </span><span style=color:#50fa7b>tar</span><span> zx
</span></code></pre><p>That will download the package to your current folder, and you may inspect the package contents now. :-)</div></article></div></body><script src=/footnotes.js></script>