<!doctype html><html class="scroll-smooth md:border-[10px] md:border-solid min-h-screen md:border-purple" lang=en><head><meta charset=utf-8><link href="/css/style.css?h=012c5f95ea1463230821" rel=stylesheet><meta content="width=device-width,initial-scale=1" name=viewport><title>How to Spy on a React Prop with Jest | Diéssica Gurskas</title><body class="text-gray-700 font-body antialiased"><div class="bg-blog px-3 md:px-10 min-h-[calc(100vh-16px)] lg:min-h-[calc(100vh-20px)]"><div class="py-12 mb-4 text-center space-x-8 text-md md:text-lg relative z-20"><a class="no-underline font-extrabold hover:border-green hover:border-b-2" href=/>diessi.ca</a><a class="no-underline hover:border-green hover:border-b-2 border-green border-b-2" href=/blog/>Blog</a><a class="no-underline hover:border-green hover:border-b-2" href=/misc/>Misc</a></div><article class="container mx-auto w-full xl:w-1/2 pb-8"><header class="xl:-mx-56 text-center mb-8 md:mb-12"><div class="uppercase tracking-widest opacity-60 mb-4 text-xs">October 31, 2019</div><h1 class="font-extrabold font-display text-3xl md:text-5xl xl:text-6xl text-slate-900">How to Spy on a React Prop with Jest</h1></header><div class="prose prose-sm md:prose 2xl:prose-lg prose-hr:text-red prose-hr:w-48 prose-hr:h-0.5 prose-hr:mx-auto prose-hr:my-4 prose-hr:bg-black prose-hr:opacity-20 prose-hr:border-0 prose-hr:rounded prose-hr:md:my-10 prose-pre:rounded-none prose-blockquote:border-0 prose-blockquote:text-center prose-blockquote:text-xl prose-blockquote:text-current tracking-tight mx-auto prose-headings:text-slate-800 prose-headings:w-max prose-headings:font-display prose-headings:font-extrabold"><p>When we want to test whether a prop has been called, mocking the prop in the component is usually the preferred way. This is how it goes with <a href=https://jestjs.io/>Jest</a> and <a href=https://airbnb.io/enzyme/>Enzyme</a>:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>buy </span><span style=color:#ff79c6>= </span><span style=color:#fff>jest</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>fn</span><span>();
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>wrapper </span><span style=color:#ff79c6>= </span><span style=color:#fff>enzyme</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>shallow</span><span>(&LTbutton onClick={buy}></span><span style=color:#fff>Buy</span><span style=color:#ff79c6>&LT/</span><span style=color:#fff>button</span><span style=color:#ff79c6>></span><span>);
</span><span>
</span><span style=color:#fff>wrapper</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>simulate</span><span>(</span><span style=color:#f1fa8c>"click"</span><span>);
</span><span>
</span><span style=color:#50fa7b>expect</span><span>(</span><span style=color:#fff>buy</span><span>)</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>toBeCalled</span><span>();
</span></code></pre><p>You may also want to spy on the prop directly, when the component is tested along with a provider passing down its props.<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>wrapper </span><span style=color:#ff79c6>= </span><span style=color:#fff>enzyme</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>shallow</span><span>(
</span><span>  &LTClickProvider>
</span><span>    &LTbutton></span><span style=color:#fff>Buy</span><span style=color:#ff79c6>&LT/</span><span style=color:#fff>button</span><span style=color:#ff79c6>>
</span><span>  </span><span style=color:#ff79c6>&LT/</span><span style=color:#fff>ClickProvider</span><span style=color:#ff79c6>>
</span><span>);
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>buy </span><span style=color:#ff79c6>= </span><span style=color:#fff>jest</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>spyOn</span><span>(</span><span style=color:#fff>wrapper</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>instance</span><span>()</span><span style=color:#ff79c6>.</span><span style=color:#fff>props</span><span>, </span><span style=color:#f1fa8c>"onClick"</span><span>);
</span><span>
</span><span style=color:#fff>wrapper</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>simulate</span><span>(</span><span style=color:#f1fa8c>"click"</span><span>);
</span><span>
</span><span style=color:#50fa7b>expect</span><span>(</span><span style=color:#fff>buy</span><span>)</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>toBeCalled</span><span>();
</span></code></pre><p>I am using Enzyme however you should be able to spy on similarly using other testing libraries – just make sure you are spying on a function in the props coming from the component prototype (as in <code>wrapper.instance()</code>).<p>That’s all. Just posting it here cuz I couldn’t find it easily anywhere else.</div></article></div></body><script src=/footnotes.js></script>