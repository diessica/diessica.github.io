<!doctype html><html class="scroll-smooth md:border-[10px] md:border-solid min-h-screen md:border-purple" lang=en><head><meta charset=utf-8><link href="/css/style.css?h=012c5f95ea1463230821" rel=stylesheet><meta content="width=device-width,initial-scale=1" name=viewport><title>Expressive JavaScript Conditionals (for Humans) | Di√©ssica Gurskas</title><body class="text-gray-700 font-body antialiased"><div class="bg-blog px-3 md:px-10 min-h-[calc(100vh-16px)] lg:min-h-[calc(100vh-20px)]"><div class="py-12 mb-4 text-center space-x-8 text-md md:text-lg relative z-20"><a class="no-underline font-extrabold hover:border-green hover:border-b-2" href=/>diessi.ca</a><a class="no-underline hover:border-green hover:border-b-2 border-green border-b-2" href=/blog/>Blog</a><a class="no-underline hover:border-green hover:border-b-2" href=/misc/>Misc</a></div><article class="container mx-auto w-full xl:w-1/2 pb-8"><header class="xl:-mx-56 text-center mb-8 md:mb-12"><div class="uppercase tracking-widest opacity-60 mb-4 text-xs">October 30, 2017</div><h1 class="font-extrabold font-display text-3xl md:text-5xl xl:text-6xl text-slate-900">Expressive JavaScript Conditionals (for Humans)</h1></header><div class="prose prose-sm md:prose 2xl:prose-lg prose-hr:text-red prose-hr:w-48 prose-hr:h-0.5 prose-hr:mx-auto prose-hr:my-4 prose-hr:bg-black prose-hr:opacity-20 prose-hr:border-0 prose-hr:rounded prose-hr:md:my-10 prose-pre:rounded-none prose-blockquote:border-0 prose-blockquote:text-center prose-blockquote:text-xl prose-blockquote:text-current tracking-tight mx-auto prose-headings:text-slate-800 prose-headings:w-max prose-headings:font-display prose-headings:font-extrabold"><p>Conditionals! As programmers, we write at least one every day. Easy to write, horrible to read, and sometimes it seems as though there‚Äôs no way to work around that.<p>Today, I‚Äôm happy to share some patterns I‚Äôve learned over time and have spread heavily in code reviews. Let‚Äôs rethink conditionals to make the most out of a language‚Äôs power of expression ‚Äì¬†in the case of this article, JavaScript.<h2 id=patterns-for-conditionals>Patterns for Conditionals</h2><p>First, to put you in the mood, a quote from Literate Programming<sup class=footnote-reference><a href=#1>1</a></sup>, by Donald Knuth.<blockquote><p>The practitioner of literate programming can be regarded as an essayist, whose main concern is with exposition and excellence of style. Such an author, with thesaurus in hand, chooses the names of variables carefully and explains what each variable means. He or she strives for a program that is comprehensible because its concepts have been introduced in an order that is best for human understanding, using a mixture of formal and informal methods that reinforce each other.</blockquote><p>That sums up the approach for this post: purely aimed at <strong>how to write code for people to read</strong>. Performance doesn‚Äôt matter now, since 1) that‚Äôs not the goal and 2) I don‚Äôt believe in premature optimisation.<p>I‚Äôll briefly talk about each pattern, but what‚Äôs more important here is to read the code carefully and get something out of it (as if it were poetry or something!).<h3 id=1-variables-that-hold-conditions>1. Variables that hold conditions</h3><p>When your condition is made up of an expression (or many of them), you can store it within meaningful-named variables.<p>Let‚Äôs say, to illustrate, that our program holds some data about a fruit and we have to check whether that fruit is a banana. We could do this:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>fruit </span><span style=color:#ff79c6>= </span><span>{
</span><span>    colors: [</span><span style=color:#f1fa8c>"yellow"</span><span>, </span><span style=color:#f1fa8c>"green"</span><span>],
</span><span>    sweet: </span><span style=color:#bd93f9>true</span><span>,
</span><span>}
</span><span>
</span><span style=color:#ff79c6>if </span><span>(</span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>sweet </span><span style=color:#ff79c6>=== </span><span style=color:#bd93f9>true </span><span style=color:#ff79c6>&& </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>colors</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>some</span><span>((</span><span style=color:#ffb86c;font-style:italic>color</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>color </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"yellow"</span><span>)) {
</span><span>    </span><span style=color:#50fa7b>alert</span><span>(</span><span style=color:#f1fa8c>"do your stuff üçå"</span><span>)
</span><span>    </span><span style=color:#ff79c6>return </span><span style=color:#f1fa8c>"is banana"
</span><span>}
</span></code></pre><p>Or we could store our conditions in variables!<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>fruit </span><span style=color:#ff79c6>= </span><span>{
</span><span>    colors: [</span><span style=color:#f1fa8c>"yellow"</span><span>, </span><span style=color:#f1fa8c>"green"</span><span>],
</span><span>    sweet: </span><span style=color:#bd93f9>true</span><span>,
</span><span>}
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isSweet </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>sweet </span><span style=color:#ff79c6>=== </span><span style=color:#bd93f9>true </span><span style=color:#6272a4>// or just `fruit.sweet`
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isYellow </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>colors</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>some</span><span>((</span><span style=color:#ffb86c;font-style:italic>color</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>color </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"yellow"</span><span>)
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>= </span><span style=color:#fff>isYellow </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isSweet
</span><span>
</span><span style=color:#ff79c6>if </span><span>(</span><span style=color:#fff>isBanana</span><span>) {
</span><span>    </span><span style=color:#50fa7b>alert</span><span>(</span><span style=color:#f1fa8c>"do your stuff üçå"</span><span>)
</span><span>    </span><span style=color:#ff79c6>return </span><span style=color:#f1fa8c>"is banana"
</span><span>}
</span></code></pre><p class=note>Not all conditions need to be in a variable. <code>fruit.sweet</code>, for instance, is quite expressive by its own.<p>This way, if we or our workmates need to know what makes a fruit a banana in our program, it‚Äôs just a matter of checking out the variable itself. The logic for how conditions evaluate will be there, behind a meaningful name.<p>It‚Äôs even more useful for composing and reusing conditions.<h4 id=filtering-arrays>Filtering arrays</h4><p class=note>In the previous example, all variables were conditions based on the <code>fruit</code> object, for didactic purposes. Commonly, though, those variables actually store (pure) functions that take any fruit and test against it. I'm changing that to fit this example.<p>Let‚Äôs say we‚Äôve got an array of fruits and we need to filter all the bananas out of it.<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>fruits </span><span style=color:#ff79c6>= </span><span>[
</span><span>    {
</span><span>        colors: [</span><span style=color:#f1fa8c>"yellow"</span><span>, </span><span style=color:#f1fa8c>"green"</span><span>],
</span><span>        sweet: </span><span style=color:#bd93f9>true</span><span>,
</span><span>    },
</span><span>    {
</span><span>        colors: [</span><span style=color:#f1fa8c>"red"</span><span>],
</span><span>        sweet: </span><span style=color:#bd93f9>false</span><span>, </span><span style=color:#6272a4>// don't know what kind of fruit this'd be
</span><span>    },
</span><span>]
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>isSweet </span><span style=color:#ff79c6>= </span><span>(</span><span style=color:#ffb86c;font-style:italic>fruit</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>sweet </span><span style=color:#ff79c6>=== </span><span style=color:#bd93f9>true
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>isYellow </span><span style=color:#ff79c6>= </span><span>(</span><span style=color:#ffb86c;font-style:italic>fruit</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>colors</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>some</span><span>((</span><span style=color:#ffb86c;font-style:italic>color</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>color </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"yellow"</span><span>)
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>isBanana </span><span style=color:#ff79c6>= </span><span>(</span><span style=color:#ffb86c;font-style:italic>fruit</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#50fa7b>isSweet</span><span>(</span><span style=color:#fff>fruit</span><span>) </span><span style=color:#ff79c6>&& </span><span style=color:#50fa7b>isYellow</span><span>(</span><span style=color:#fff>fruit</span><span>)
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>bananas </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruits</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>filter</span><span>(</span><span style=color:#fff>isBanana</span><span>)
</span></code></pre><p>So expressive! I love the way that I can read that last line and even a kid (a non-programmer one!) can understand. <em>(Yes, I‚Äôve tried that.)</em><p>The currying technique would help introduce expressiveness without the verbosity for <code>isBanana</code>. An optional appendix at the end of the article elaborates more on that, if you‚Äôre curious.<p>That‚Äôs it. Hold on to that one though ‚Äì it‚Äôs the foundation for what‚Äôs next.<h3 id=2-define-value-conditionally>2. Define value conditionally</h3><p>Still considering the variables from the example above, this could also be done:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>myFruit </span><span style=color:#ff79c6>= </span><span style=color:#fff>isYellow </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isSweet </span><span style=color:#ff79c6>&& </span><span style=color:#f1fa8c>"banana"
</span><span style=color:#ff79c6>return </span><span style=color:#fff>myFruit
</span></code></pre><p>The value for the <code>myFruit</code> variable will only be assigned to ‚Äúbanana‚Äù if those conditions are true. Pretty useful for when values are defined conditionally!<p>That saves you from <code>if (isYellow && isSweet) [...]</code>, and it‚Äôs quite expressive, I‚Äôd say. An expressive expression. üëå<h3 id=3-define-value-conditionally-with-fallback>3. Define value conditionally with fallback</h3><figure class=text-center><picture><img alt="Conditionals, a comic from xkcd" src=https://imgs.xkcd.com/comics/conditionals_2x.png width=250></picture><figcaption><a href=http://xkcd.com/1652>xkcd: Conditionals</a></figcaption></figure><p>What if we want something else in case it‚Äôs not a banana? Instead of an <code>if (isBanana) [...]</code> with <code>else</code>, go for the <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator>ternary operator</a>.<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>= </span><span style=color:#fff>isYellow </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isSweet
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>myFruit </span><span style=color:#ff79c6>= </span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>? </span><span style=color:#f1fa8c>"is banana" </span><span style=color:#ff79c6>: </span><span style=color:#f1fa8c>"is other stuff"
</span><span style=color:#ff79c6>return </span><span style=color:#fff>myFruit
</span></code></pre><p>Some additional but important advice I‚Äôd give regarding ternary expressions:<ul><li>Make them as compound as possible.<li>Do NOT nest them. Don‚Äôt pretend the nesting is readable ‚Äì¬†it‚Äôs not even human to do that.<li>Don‚Äôt avoid writing <code>if</code> statements because you want to look smart.</ul><h3 id=4-check-for-all-conditions>4. Check for all conditions</h3><p>We‚Äôve (finally) found out that checking for <code>isYellow</code> and <code>isSweet</code> isn‚Äôt enough to make sure the fruit is a banana. After all, yellow pepper is both sweet and yellow and it‚Äôs still not a banana, right?<p>Right. We then add more checks to the <code>isBanana</code> variable, and this time they‚Äôre ugly ones: they check whether the fruit is either from Brazil or Ecuador, both top banana producing countries.<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>fruit </span><span style=color:#ff79c6>= </span><span>{
</span><span>    colors: [</span><span style=color:#f1fa8c>"yellow"</span><span>, </span><span style=color:#f1fa8c>"green"</span><span>],
</span><span>    sweet: </span><span style=color:#bd93f9>true</span><span>,
</span><span>    countries: [
</span><span>        {
</span><span>            name: </span><span style=color:#f1fa8c>"Brazil"</span><span>,
</span><span>            topProducer: </span><span style=color:#bd93f9>true</span><span>, </span><span style=color:#6272a4>// i'm brazilian and therefore biased
</span><span>        },
</span><span>        {
</span><span>            name: </span><span style=color:#f1fa8c>"Ecuador"</span><span>,
</span><span>            topProducer: </span><span style=color:#bd93f9>false</span><span>,
</span><span>        },
</span><span>    ],
</span><span>}
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isSweet </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>sweet </span><span style=color:#ff79c6>=== </span><span style=color:#bd93f9>true </span><span style=color:#6272a4>// or just `fruit.sweet`
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isYellow </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>colors</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>some</span><span>((</span><span style=color:#ffb86c;font-style:italic>color</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>color </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"yellow"</span><span>)
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBrazilian </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>countries</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd>find</span><span>((</span><span style=color:#ffb86c;font-style:italic>i</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>i</span><span style=color:#ff79c6>.</span><span>name </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"Brazil"</span><span>)
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isEcuadorian </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>countries</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd>find</span><span>((</span><span style=color:#ffb86c;font-style:italic>i</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>i</span><span style=color:#ff79c6>.</span><span>name </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"Ecuador"</span><span>)
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>= </span><span style=color:#fff>isYellow </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isSweet </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isBrazilian </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isEcuadorian
</span><span>
</span><span style=color:#ff79c6>if </span><span>(</span><span style=color:#fff>isBanana</span><span>) {
</span><span>    </span><span style=color:#50fa7b>alert</span><span>(</span><span style=color:#f1fa8c>"do your stuff!11 üçå"</span><span>)
</span><span>    </span><span style=color:#66d9ef;font-style:italic>console</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd>log</span><span>(</span><span style=color:#f1fa8c>"now this is really a banana"</span><span>)
</span><span>}
</span></code></pre><p>Did you see how big <code>isBanana</code> is getting? We‚Äôd have to start breaking lines in those <code>&&</code> to improve readability, which, personally, I don‚Äôt like doing.<p>If refactoring the booleans into new variables isn‚Äôt an option anymore, what about <em>storing the conditions in an array and testing every item for truthiness</em>?<p>Use the power of <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every>array‚Äôs <code>every</code></a>:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>= </span><span>[</span><span style=color:#fff>isYellow</span><span>, </span><span style=color:#fff>isSweet</span><span>, </span><span style=color:#fff>isEcuadorian</span><span>, </span><span style=color:#fff>isBrazilian</span><span>]</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>every</span><span>(</span><span style=color:#66d9ef;font-style:italic>Boolean</span><span>) </span><span style=color:#6272a4>// or `x => x === true`
</span></code></pre><p class=note>Repetitive friendly reminder: don't store every condition in a variable. Remember you can always add the condition itself to the array.<p>You can even turn that into a snippet:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>all </span><span style=color:#ff79c6>= </span><span>(</span><span style=color:#ffb86c;font-style:italic>arr</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>arr</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>every</span><span>(</span><span style=color:#66d9ef;font-style:italic>Boolean</span><span>)
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>= </span><span style=color:#50fa7b>all</span><span>([</span><span style=color:#fff>isYellow</span><span>, </span><span style=color:#fff>isSweet</span><span>, </span><span style=color:#fff>isEcuadorian</span><span>, </span><span style=color:#fff>isBrazilian</span><span>])
</span></code></pre><p>I don‚Äôt know how useful that looks for you, but, in everyday work, I really appreciate doing it.<h3 id=5-check-for-any-condition>5. Check for any condition</h3><p>What if we‚Äôve got crazy and we‚Äôre fine considering something a banana when it‚Äôs either yellow, Brazilian or sweet?<p>Use the power of <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some>array‚Äôs <code>some</code></a>:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>= </span><span>[</span><span style=color:#fff>isYellow</span><span>, </span><span style=color:#fff>isSweet</span><span>, </span><span style=color:#fff>isBrazilian</span><span>]</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>some</span><span>(</span><span style=color:#66d9ef;font-style:italic>Boolean</span><span>) </span><span style=color:#6272a4>// or `x => x === true`
</span></code></pre><p class=note>Yeah, yeah, I know, you can just use the <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_Operators#Logical_OR_()>OR operator</a>.<p>If any of them evaluates to true, profit! ‚Äì¬†it‚Äôs a banana. üçå<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>any </span><span style=color:#ff79c6>= </span><span>(</span><span style=color:#ffb86c;font-style:italic>arr</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>arr</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>some</span><span>(</span><span style=color:#66d9ef;font-style:italic>Boolean</span><span>)
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>= </span><span style=color:#50fa7b>any</span><span>([</span><span style=color:#fff>isYellow</span><span>, </span><span style=color:#fff>isSweet</span><span>, </span><span style=color:#fff>isBrazilian</span><span>])
</span></code></pre><p>In other words, being a Brazilian means you‚Äôre a banana! It doesn‚Äôt sound any bad to me honestly.<p>Pretty similar to <a href=http://ramdajs.com/docs/#either>Ramda‚Äôs <code>either</code></a>. üòé<h3 id=6-early-return>6. Early return</h3><p>We want something special for when the banana is Brazilian! <code>else</code> conditions would do the trick, wouldn‚Äôt they?<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>fruit </span><span style=color:#ff79c6>= </span><span>{
</span><span>    colors: [</span><span style=color:#f1fa8c>"yellow"</span><span>, </span><span style=color:#f1fa8c>"green"</span><span>],
</span><span>    sweet: </span><span style=color:#bd93f9>true</span><span>,
</span><span>    countries: [
</span><span>        {
</span><span>            name: </span><span style=color:#f1fa8c>"Brazil"</span><span>,
</span><span>            topProducer: </span><span style=color:#bd93f9>true</span><span>, </span><span style=color:#6272a4>// i'm brazilian and therefore biased
</span><span>        },
</span><span>        {
</span><span>            name: </span><span style=color:#f1fa8c>"Ecuador"</span><span>,
</span><span>            topProducer: </span><span style=color:#bd93f9>false</span><span>,
</span><span>        },
</span><span>    ],
</span><span>}
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isSweet </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>sweet </span><span style=color:#ff79c6>=== </span><span style=color:#bd93f9>true </span><span style=color:#6272a4>// or just `fruit.sweet`
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isYellow </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>colors</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>some</span><span>((</span><span style=color:#ffb86c;font-style:italic>color</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>color </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"yellow"</span><span>)
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBrazilian </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>countries</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd>find</span><span>((</span><span style=color:#ffb86c;font-style:italic>i</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>i</span><span style=color:#ff79c6>.</span><span>name </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"Brazil"</span><span>)
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isEcuadorian </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruit</span><span style=color:#ff79c6>.</span><span style=color:#fff>countries</span><span style=color:#ff79c6>.</span><span style=color:#8be9fd>find</span><span>((</span><span style=color:#ffb86c;font-style:italic>i</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>i</span><span style=color:#ff79c6>.</span><span>name </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"Ecuador"</span><span>)
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>= </span><span style=color:#fff>isYellow </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isSweet
</span><span>
</span><span style=color:#ff79c6>if </span><span>(</span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isBrazilian</span><span>) {
</span><span>    </span><span style=color:#6272a4>// first true case!
</span><span>    </span><span style=color:#50fa7b>alert</span><span>(</span><span style=color:#f1fa8c>"i am a brazilian banana i love football üçå"</span><span>)
</span><span>} </span><span style=color:#ff79c6>else if </span><span>(</span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isEcuadorian</span><span>) {
</span><span>    </span><span style=color:#50fa7b>alert</span><span>(</span><span style=color:#f1fa8c>"i am an ecuadorian banana do not mess with me üçå"</span><span>)
</span><span>} </span><span style=color:#ff79c6>else </span><span>{
</span><span>    </span><span style=color:#50fa7b>alert</span><span>(</span><span style=color:#f1fa8c>"a normal banana from somewhere else"</span><span>)
</span><span>}
</span></code></pre><p>Alternatively, THOOOUGH, we can early return (nothing at all, i.e. <code>undefined</code>), which will make <strong>our code stops its flow at that point</strong>.<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#ff79c6>if </span><span>(</span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isBrazilian</span><span>) {
</span><span>    </span><span style=color:#50fa7b>alert</span><span>(</span><span style=color:#f1fa8c>"i am a brazilian banana i love football üçå"</span><span>)
</span><span>    </span><span style=color:#ff79c6>return </span><span style=color:#6272a4>// sTAAAAHP!!!1
</span><span>}
</span><span>
</span><span style=color:#ff79c6>if </span><span>(</span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>&& </span><span style=color:#fff>isEcuadorian</span><span>) {
</span><span>    </span><span style=color:#50fa7b>alert</span><span>(</span><span style=color:#f1fa8c>"i am an ecuadorian banana do not mess with me üçå"</span><span>)
</span><span>    </span><span style=color:#ff79c6>return </span><span style=color:#6272a4>// DON'T GO ANY FURTHER, JAVASCRIPT!11
</span><span>}
</span><span>
</span><span style=color:#6272a4>// or do, whatever
</span><span style=color:#50fa7b>alert</span><span>(</span><span style=color:#f1fa8c>"a normal banana from somewhere else"</span><span>)
</span></code></pre><p class=note>Those checks could also be refactored into a variable named <code>isBrazilianBanana</code>. I found it too much for this example though, so this is just a friendly reminder that your conditions can always be composable.<p>Keep in mind that early returns might make the flow of your program confusing. Different from when you‚Äôre using <code>else</code> conditions, it‚Äôs not explicit that the conditionals are from the same logical group anymore.<h3 id=7-check-for-the-same-variable>7. Check for the same variable</h3><p>Let‚Äôs get the colour of the fruits! Each fruit has one.<p>Hmmm‚Ä¶ Different cases that require different handling, but all handled cases depend on the same thing. What do we do? We conditionally check for its value and handle the case depending on that.<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>getFruitColor </span><span style=color:#ff79c6>= </span><span>(</span><span style=color:#ffb86c;font-style:italic>fruit</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span>{
</span><span>    </span><span style=color:#ff79c6>if </span><span>(</span><span style=color:#fff>fruit </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"banana"</span><span>) {
</span><span>        </span><span style=color:#ff79c6>return </span><span style=color:#f1fa8c>"is yellow"
</span><span>    } </span><span style=color:#ff79c6>else if </span><span>(</span><span style=color:#fff>fruit </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"apple"</span><span>) {
</span><span>        </span><span style=color:#ff79c6>return </span><span style=color:#f1fa8c>"is red"
</span><span>    } </span><span style=color:#ff79c6>else if </span><span>(</span><span style=color:#fff>fruit </span><span style=color:#ff79c6>=== </span><span style=color:#f1fa8c>"orange"</span><span>) {
</span><span>        </span><span style=color:#ff79c6>return </span><span style=color:#f1fa8c>"is orange"
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#50fa7b>getFruitColor</span><span>(</span><span style=color:#f1fa8c>"banana"</span><span>) </span><span style=color:#6272a4>// => is yellow
</span></code></pre><p class=note>This code would benefit from early returns, and, of course, the <code>switch</code> statement.<p>Or we don‚Äôt. Because, alternatively, we can create a getter function (<code>getFruitColor</code>) that:<ol><li>inputs a key (<code>fruit</code>), and<li>outputs the value that was assigned to that key in a specific map (<code>fruitColors</code>).</ol><p>Like this:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>fruitColors </span><span style=color:#ff79c6>= </span><span>{
</span><span>    banana: </span><span style=color:#f1fa8c>'is yellow'
</span><span>    </span><span style=color:#fff>apple</span><span>: </span><span style=color:#f1fa8c>'is red'</span><span>,
</span><span>    orange: </span><span style=color:#f1fa8c>'is orange'</span><span>,
</span><span>}
</span><span>
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>getFruitColor </span><span style=color:#ff79c6>= </span><span style=color:#ffb86c;font-style:italic>fruit </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#fff>fruitColors</span><span>[</span><span style=color:#fff>fruit</span><span>]
</span><span>
</span><span style=color:#50fa7b>getFruitColor</span><span>(</span><span style=color:#f1fa8c>'banana'</span><span>) </span><span style=color:#6272a4>// fruitColors['banana'] => is yellow
</span></code></pre><p>Simplifying, since that map isn‚Äôt useful outside of the getter itself anyway:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>getFruitColor </span><span style=color:#ff79c6>= </span><span style=color:#ffb86c;font-style:italic>fruit </span><span style=color:#8be9fd;font-style:italic>=> </span><span>({
</span><span>    banana: </span><span style=color:#f1fa8c>'is yellow'
</span><span>    </span><span style=color:#fff>apple</span><span>: </span><span style=color:#f1fa8c>'is red'</span><span>,
</span><span>    orange: </span><span style=color:#f1fa8c>'is orange'</span><span>,
</span><span>}[</span><span style=color:#fff>fruit</span><span>]
</span><span>
</span><span style=color:#50fa7b>getFruitColor</span><span>(</span><span style=color:#f1fa8c>'banana'</span><span>) </span><span style=color:#6272a4>// => is yellow
</span></code></pre><p>This is a very common technique I first saw on a <a href=https://javascriptweblog.wordpress.com/2010/03/08/caseagainstswitch/>blog post from Angus Croll</a> in 2010. I love the simplicity of it.<p>Nowadays there‚Äôs even more freedom with this technique, considering features such as <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names>computed property names for objects</a>. But don‚Äôt get too creative with that! Go for what‚Äôs more readable and expressive for you <strong>AND</strong> the people you work with.<h3 id=appendix-currying-because-verbosity-isn-t-expressiveness>Appendix: Currying, because verbosity isn‚Äôt expressiveness</h3><p class=note>This is an additional reading and requires familiarity with curried functions. For further reading on the currying technique, I recommend the <a href=https://drboolean.gitbooks.io/mostly-adequate-guide/content/ch4.html#cant-live-if-livin-is-without-you>"Currying" chapter</a> of the book Mostly Adequate Guide to Functional Programming, or <a href=https://www.sitepoint.com/currying-in-functional-javascript/>A Beginner‚Äôs Guide to Currying</a>, as a more beginner-friendly introduction.<p>Let‚Äôs reconsider:<ol><li>the problem from the 1st, where we had an array of fruits and had to create a function that checks whether the fruit passed to it was a banana, and<li>the <code>all</code> util from the 4th pattern.</ol><h4 id=check-for-all-conditions-revisited>Check for all conditions, revisited</h4><p>Imagine if we had a lot of conditions for <code>isBanana</code>. We could use <code>&&</code> or even <code>all</code>.<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>isBanana </span><span style=color:#ff79c6>= </span><span>(</span><span style=color:#ffb86c;font-style:italic>fruit</span><span>) </span><span style=color:#8be9fd;font-style:italic>=>
</span><span>    </span><span style=color:#50fa7b>isBanana</span><span>(</span><span style=color:#fff>fruit</span><span>) </span><span style=color:#ff79c6>&&
</span><span>    </span><span style=color:#50fa7b>isSweet</span><span>(</span><span style=color:#fff>fruit</span><span>) </span><span style=color:#ff79c6>&&
</span><span>    </span><span style=color:#50fa7b>isEcuadorian</span><span>(</span><span style=color:#fff>fruit</span><span>) </span><span style=color:#ff79c6>&&
</span><span>    </span><span style=color:#50fa7b>isBrazilian</span><span>(</span><span style=color:#fff>fruit</span><span>)
</span><span style=color:#6272a4>// or
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>isBanana </span><span style=color:#ff79c6>= </span><span>(</span><span style=color:#ffb86c;font-style:italic>fruit</span><span>) </span><span style=color:#8be9fd;font-style:italic>=>
</span><span>    </span><span style=color:#50fa7b>all</span><span>([
</span><span>        </span><span style=color:#50fa7b>isYellow</span><span>(</span><span style=color:#fff>fruit</span><span>),
</span><span>        </span><span style=color:#50fa7b>isSweet</span><span>(</span><span style=color:#fff>fruit</span><span>),
</span><span>        </span><span style=color:#50fa7b>isEcuadorian</span><span>(</span><span style=color:#fff>fruit</span><span>),
</span><span>        </span><span style=color:#50fa7b>isBrazilian</span><span>(</span><span style=color:#fff>fruit</span><span>),
</span><span>    ])
</span></code></pre><p>It‚Äôs meaningful, easy to read, but introduces too much verbosity. The currying technique could help us introduce more meaning without being verbose. With some changes in the <code>all</code> util, that could be boiled down to:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>isBanana </span><span style=color:#ff79c6>= </span><span style=color:#50fa7b>all</span><span>([</span><span style=color:#fff>isSweet</span><span>, </span><span style=color:#fff>isYellow</span><span>, </span><span style=color:#fff>isEcuadorian</span><span>, </span><span style=color:#fff>isBrazilian</span><span>])
</span><span style=color:#6272a4>// no explicit fruit here, and still works!
</span><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#fff>bananas </span><span style=color:#ff79c6>= </span><span style=color:#fff>fruits</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>filter</span><span>(</span><span style=color:#fff>isBanana</span><span>)
</span></code></pre><p>Notice we‚Äôre not explicitly passing fruit anymore. How do we do that? By making <code>all</code> a curried function. There are some ways to achieve that, here‚Äôs one:<pre class=language-js data-lang=js style=color:#f8f8f2;background-color:#282a36><code class=language-js data-lang=js><span style=color:#8be9fd;font-style:italic>const </span><span style=color:#50fa7b>all </span><span style=color:#ff79c6>= </span><span>(</span><span style=color:#ffb86c;font-style:italic>conditions</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span>(</span><span style=color:#ffb86c;font-style:italic>currentItem</span><span>) </span><span style=color:#8be9fd;font-style:italic>=>
</span><span>    </span><span style=color:#fff>conditions</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>map</span><span>((</span><span style=color:#ffb86c;font-style:italic>condition</span><span>) </span><span style=color:#8be9fd;font-style:italic>=> </span><span style=color:#50fa7b>condition</span><span>(</span><span style=color:#fff>currentItem</span><span>))</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>every</span><span>(</span><span style=color:#66d9ef;font-style:italic>Boolean</span><span>)
</span></code></pre><p>It takes the array of conditions and returns a function that takes the current item and calls each condition with that (as <em>argument</em>!). At the end, we check whether they all evaluated to true. It‚Äôs not magic, it‚Äôs CURRYING!!!11<sup class=footnote-reference><a href=#2>2</a></sup><p>That‚Äôs, of course, a simplistic implementation, which has costed me an array (from <code>map</code>). What‚Äôs important to get is how we play with <strong>function arguments under the hood</strong> to achieve currying.<p>You can curry your functions using <a href=http://ramdajs.com/docs/#all>Ramda‚Äôs <code>curry</code></a> (or Lodash‚Äôs, whatever); or, if you‚Äôre interested on that as an util, <a href=http://ramdajs.com/docs/#all>Ramda‚Äôs <code>all</code></a> and <a href=https://github.com/ramda/ramda/blob/master/source/all.js>its source</a> are really worth-checking!<h2 id=final-considerations>Final considerations</h2><p>By striving for conditionals as expressions other than statements, you write code in a <strong>functional</strong> approach. Code with a clearer sense of what it‚Äôs being checked without having to unearth to its foundations. Code that‚Äôs easier and faster for people to reason about.<p><strong>But if your code is fine with an <code>if</code> rather than an object lookup or a ternary operator, just stick to it.</strong><p>It‚Äôd break the whole purpose of this post if those patterns were used for looking smart. However, if refactoring your conditionals with them would lead to a more expressive codebase, go for it! Play with the patterns, <strong>compound them</strong>. Use your creativity to communicate well.<p>It‚Äôs a language, after all.<div class=footnote-definition id=1><sup class=footnote-definition-label>1</sup><p>A programming paradigm first introduced by Donald Knuth, with the goal of providing an alternative, human, perspective on the programmer‚Äôs motivation. <a href=http://www.literateprogramming.com/knuthweb.pdf>Read the article</a>.</div><div class=footnote-definition id=2><sup class=footnote-definition-label>2</sup><p><strong>It may seem more magic than currying sometimes.</strong> JavaScript isn‚Äôt a purely functional language, so such techniques aren‚Äôt as popular as they are in Haskell community, for instance. Simplicity conflicts with easiness here.</div></div></article></div></body><script src=/footnotes.js></script>